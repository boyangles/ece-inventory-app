<%= form_for(request) do |f| %>
  <% @form_obj = request %>
  <% if @form_obj %>
    <%= render 'shared/error_messages', object: @form_obj %>
  <% end %>

	<p>
		<b>Items Requested</b>

		<% if request.request_items.empty? %>
			<p> Your cart is empty! </p>
		<% end %>

		<%= f.fields_for :request_items do |ff| %>
			<p class = "req_item">		
				<% if ff.object.item_id.nil? %>
					<b>Item ID</b>
					<%= ff.number_field :item_id %>
					<%= ff.hidden_field :request_id, :value => (request.id) %>
				<% else %>
					<%= Item.find(ff.object.item_id).unique_name %>
				<% end %>
				<%= ff.number_field :quantity, :required => true %>
			</p>
 		<% end %>

	</p>

  <p>
    <%= f.label :reason %><br>
    <%= f.text_area :reason, :required => true %>
  </p>

  <%= f.hidden_field :user_id, :value => (request.user_id) ? request.user_id : current_user.id %>
  <%= f.hidden_field :status, :value => request.status %>


  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
