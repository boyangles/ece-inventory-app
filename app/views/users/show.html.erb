<p id="notice"><%= notice %></p>

<% if @user.status_deactivated? %>
  <div class="panel panel-danger">
    <div class="panel-heading">
      <h3 class="panel-title">User has been deleted.</h3>
    </div>
  </div>
<% end %>

<div class="center_jumbotron">
  <h2 class="page-header"><%= @user.username %>
    <% if is_manager_or_admin? && !current_user?(@user) %>
      <%= link_to "Edit User", edit_user_url(@user.id), :class => "btn btn-primary pull-right" %>
    <% end %>
  </h2>
</div>

<ul class="nav nav-tabs">
  <li class="active"><a href="#home" data-toggle="tab">User Info</a></li>
  <li><a href="#requests" data-toggle="tab">Requests (<%= @requests.count %>)</a></li>
  <li><a href="#loans" data-toggle="tab">Loans</a></li>
</ul>

<div id="myTabContent" class="tab-content">
  <div class="tab-pane fade active in" id="home">
    <br>
    <p>
      <strong>Privilege:</strong>
      <%= @user.privilege %>
    </p>

    <div class="panel panel-info">
      <div class="panel-heading">
        <h3 class="panel-title">Loans TBD</h3>
      </div>
      <div class="panel-body">
      </div>
    </div>

    <div class="panel panel-success">
      <div class="panel-heading">
        <h3 class="panel-title">Approved Requests
        <%= link_to "Show All", '#', class: "request-display-link pull-right" %></h3>
      </div>
      <div class="panel-body">
	<%= render Request.where(user_id: @user.id, status: "approved") %>
      </div>
    </div>

    <div class="panel panel-warning">
      <div class="panel-heading">
        <h3 class="panel-title">Outstanding Requests</h3>
      </div>
      <div class="panel-body">
	<%= render Request.where(user_id: @user.id, status: "outstanding") %>
      </div>
    </div>

    <div class="panel panel-danger">
      <div class="panel-heading">
        <h3 class="panel-title">Denied Requests</h3>
      </div>
      <div class="panel-body">
      </div>
    </div>


    <% if !@user.status_deactivated? && is_admin? && @user != current_user%>
      <%= render 'deactivateuserform', user: @user, :class => "pull-right" %>
    <% end %>

    <%= link_to 'Edit', edit_user_path(@user) if (is_admin? || current_user?(@user)) %> |
    <%= link_to 'Back', url_for(:back) %> |
    <%= link_to 'Authentication Token', auth_token_path %>

  </div>

  <div class="tab-pane fade" id="requests">
    <% provide(:title, @user.username) %>
    <br>
    <% if @user.requests.any? %>
      <!-- <%= render @requests %>-->
      <!--<%= will_paginate @requests %>-->
    <% end %>
  </div> 


  <div class="tab-pane fade" id="loans">

  </div>
</div>

